<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Segudab — Catálogo de productos</title>

  <style>
    :root {
      --color-bg-dark: #050505;
      --color-bg-light: #f5f5f5;
      --color-primary: #e00000;
      --color-primary-dark: #b30000;
      --color-accent: #f4c542;
      --color-text: #111111;
      --max-width: 1200px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: var(--color-bg-light);
    }

    /* Top bar */
    .top-bar {
      background: #000;
      color: #fff;
      font-size: 13px;
      padding: 6px 16px;
      display: flex;
      justify-content: center;
      gap: 16px;
    }

    /* Nav */
    header {
      background: #000;
      color: #fff;
      padding: 12px 30px;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    .nav-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #fff;
      text-decoration: none;
    }

    .logo-img {
      width: 48px;
      height: 48px;
      border-radius: 6px;
      background: url('logo.png') center/cover no-repeat;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
      font-size: 13px;
      text-transform: uppercase;
    }

    .logo-text strong {
      font-size: 20px;
      letter-spacing: 1px;
    }

    nav {
      display: flex;
      gap: 20px;
      font-size: 14px;
      text-transform: uppercase;
      align-items: center;
    }

    nav a {
      color: #fff;
      padding-bottom: 3px;
      border-bottom: 2px solid transparent;
      transition: .2s;
      text-decoration: none;
    }

    nav a:hover {
      border-color: var(--color-primary);
      color: var(--color-accent);
    }

    .nav-cta {
      background: var(--color-primary);
      padding: 8px 16px;
      border-radius: 999px;
      font-weight: 600;
    }

    /* === DROPDOWN PRODUCTOS === */
    .nav-item {
      position: relative;
    }

    .nav-link .caret {
      font-size: 10px;
      margin-left: 4px;
    }

    .dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      background: #000;
      min-width: 200px;
      padding: 10px 0;
      box-shadow: 0 8px 18px rgba(0,0,0,0.6);
      opacity: 0;
      pointer-events: none;
      transform: translateY(8px);
      transition: opacity .15s ease, transform .15s ease;
      z-index: 9999;
      border-top: 2px solid var(--color-accent);
    }

    .nav-item:hover .dropdown {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .dropdown a {
      display: block;
      padding: 8px 18px;
      font-size: 13px;
      color: #fff;
      text-decoration: none;
      border-bottom: none;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .dropdown a:hover {
      background: #111;
      color: var(--color-accent);
    }

    /* Hero */
    .hero {
      background: radial-gradient(circle at top left, #333 0, #000 45%, #111 100%);
      color: #fff;
      padding: 60px 20px;
    }

    .hero-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
    }

    .hero-title {
      font-size: 40px;
      text-transform: uppercase;
      font-weight: 800;
    }

    .hero-subtitle {
      font-size: 18px;
      text-transform: uppercase;
      color: #ddd;
      margin-bottom: 12px;
    }

    .hero-text {
      color: #ddd;
      max-width: 480px;
      margin-bottom: 20px;
      font-size: 15px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      padding: 12px 24px;
      border-radius: 999px;
      text-transform: uppercase;
      font-weight: 600;
      cursor: pointer;
      transition: .15s;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--color-primary);
      color: #fff;
      box-shadow: 0 6px 14px rgba(224,0,0,0.5);
    }

    .btn-primary:hover {
      background: var(--color-primary-dark);
    }

    .hero-buttons { margin-top: 12px; }

    /* Aviso */
    .notice-bar {
      background: var(--color-primary);
      color: #fff;
      padding: 10px;
      text-align: center;
      font-size: 13px;
      margin-bottom: 20px;
    }

    /* Section */
    .section { padding: 50px 20px; }

    .section-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      text-align: left;
    }

    .section-title {
      font-size: 26px;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .section-subtitle {
      font-size: 14px;
      color: #777;
      margin-bottom: 10px;
    }

    /* --- CATÁLOGO & CARRITO --- */

    .catalog-layout {
      max-width: var(--max-width);
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 1.3fr);
      gap: 24px;
      align-items: flex-start;
      padding: 0 10px;
      justify-content: center;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .product-card {
      background: #fff;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      cursor: pointer;
    }

    .product-image {
      height: 170px;
      background-size: cover;
      background-position: center;
    }

    /* Para que ciertas fotos se vean completas */
    .product-image.product-image-contain {
      background-size: contain;
      background-position: top center;
      background-repeat: no-repeat;
      background-color: #fff;
    }

    .product-body {
      padding: 14px 16px 16px;
      text-align: left;
    }

    .product-name {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .product-desc {
      font-size: 13px;
      color: #555;
      margin-bottom: 8px;
    }

    .product-tag {
      display: inline-block;
      font-size: 11px;
      text-transform: uppercase;
      background: #eee;
      padding: 2px 8px;
      border-radius: 999px;
      margin-bottom: 8px;
    }

    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
    }

    .product-price {
      font-weight: 700;
      font-size: 15px;
      color: var(--color-primary);
    }

    .btn-small {
      padding: 8px 14px;
      font-size: 12px;
      border-radius: 999px;
      border: none;
      background: var(--color-primary);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
    }

    .btn-small:hover { background: var(--color-primary-dark); }

    /* Columna derecha: filtros + carrito */
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: stretch;
    }

    /* FILTROS */
    .filters {
      background: #fff;
      padding: 16px 18px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      text-align: left;
      width: 100%;
    }

    .filters h3 {
      margin: 0 0 10px;
      font-size: 16px;
      text-transform: uppercase;
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .filter-btn {
      border-radius: 999px;
      border: 1px solid #ccc;
      background: #f7f7f7;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      text-transform: uppercase;
    }

    .filter-btn:hover { background: #eee; }

    .filter-btn.active {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: #fff;
    }

    .filters-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 8px;
    }

    .filters-row label {
      font-size: 12px;
      color: #555;
    }

    .filters select {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      width: 100%;
      max-width: 220px;
    }

    /* input del buscador */
    .filters input[type="text"] {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      width: 100%;
      max-width: 220px;
    }

    /* Carrito */
    .cart-panel {
      background: #fff;
      border-radius: 14px;
      padding: 16px 18px 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      position: sticky;
      top: 90px;
      font-size: 14px;
      max-width: 360px;
      width: 100%;
      justify-self: center;
      text-align: left;
      align-self: flex-start;
    }

    .cart-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .cart-items {
      max-height: 220px;
      overflow-y: auto;
      margin-bottom: 10px;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
      padding: 8px 0;
      font-size: 13px;
    }

    .cart-item {
      margin-bottom: 8px;
      padding-bottom: 6px;
      border-bottom: 1px dashed #eee;
    }

    .cart-item:last-child { border-bottom: none; }

    .cart-item-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .cart-item-name { font-weight: 600; }

    .cart-item-subtotal {
      font-weight: 600;
      color: var(--color-primary);
    }

    .cart-item-meta {
      font-size: 12px;
      color: #555;
      margin-bottom: 4px;
    }

    .cart-item-actions {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
    }

    .qty-btn,
    .remove-btn {
      border: none;
      border-radius: 999px;
      padding: 2px 7px;
      cursor: pointer;
      font-size: 12px;
      background: #eee;
    }

    .qty-btn:hover { background: #ddd; }

    .remove-btn {
      background: #f8d7da;
      color: #900;
      margin-left: auto;
    }

    .remove-btn:hover { background: #f1b0b7; }

    .cart-item-qty {
      min-width: 18px;
      text-align: center;
      font-weight: 600;
    }

    .cart-empty {
      color: #777;
      font-size: 13px;
      text-align: center;
      padding: 10px 0;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 700;
      margin-bottom: 10px;
      margin-top: 4px;
    }

    .cart-note {
      font-size: 11px;
      color: #777;
      margin-bottom: 8px;
    }

    /* medios de pago */
    .payment-methods {
      font-size: 11px;
      color: #555;
      margin-bottom: 10px;
    }

    .payment-methods strong {
      font-size: 12px;
      display: block;
      margin-bottom: 4px;
    }

    .payment-methods ul {
      margin: 0;
      padding-left: 18px;
    }

    .payment-methods li {
      margin-bottom: 2px;
    }

    .checkout-inputs {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 10px;
    }

    .checkout-inputs input {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 13px;
      width: 100%;
    }

    .btn-cart {
      width: 100%;
      text-align: center;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      background: var(--color-primary);
      color: #fff;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 4px;
    }

    .btn-cart:hover { background: var(--color-primary-dark); }

    /* Botón Mercado Pago */
    .btn-mp {
      background: #009ee3;
      margin-top: 6px;
    }

    .btn-mp:hover {
      background: #007bb8;
    }

    /* === DETALLE DE PRODUCTO (overlay) === */
    .product-detail-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
    }

    .product-detail {
      background: #fff;
      border-radius: 18px;
      max-width: 880px;
      width: 100%;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
      gap: 24px;
      padding: 22px 24px 24px;
      position: relative;
    }

    .detail-image {
      border-radius: 14px;
      background-size: cover;
      background-position: center;
      min-height: 260px;
      cursor: zoom-in;
    }

    .detail-image.detail-image-contain {
      background-size: contain;
      background-position: top center;
      background-repeat: no-repeat;
      background-color: #fff;
    }

    .detail-info {
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-size: 14px;
    }

    .detail-tag {
      display: inline-block;
      font-size: 11px;
      text-transform: uppercase;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eee;
      align-self: flex-start;
    }

    .detail-name {
      font-size: 20px;
      margin: 0;
    }

    .detail-article {
      margin: 0;
      font-size: 12px;
      color: #777;
    }

    .detail-desc {
      margin: 4px 0 0;
      color: #555;
      font-size: 14px;
    }

    .detail-stock {
      font-size: 13px;
      color: #008000;
    }

    .detail-price-row {
      margin-top: 8px;
      margin-bottom: 6px;
    }

    .detail-price {
      font-size: 20px;
      font-weight: 700;
      color: var(--color-primary);
    }

    .detail-form {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 8px 0 4px;
    }

    .detail-form label {
      font-size: 13px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .detail-form select,
    .detail-form input[type="number"] {
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 13px;
      min-width: 100px;
    }

    .detail-actions {
      margin-top: 4px;
    }

    .detail-add-btn {
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      background: var(--color-primary);
      color: #fff;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      text-transform: uppercase;
    }

    .detail-add-btn:hover {
      background: var(--color-primary-dark);
    }

    .detail-close {
      position: absolute;
      top: 10px;
      right: 12px;
      border: none;
      background: transparent;
      font-size: 20px;
      cursor: pointer;
      line-height: 1;
    }

    /* Flechas de navegación en detalle */
    .detail-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: rgba(0,0,0,0.4);
      color: #fff;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .detail-arrow-left {
      left: -18px;
    }

    .detail-arrow-right {
      right: -18px;
    }

    .detail-arrow:hover {
      background: rgba(0,0,0,0.6);
    }

    /* === ZOOM DE IMAGEN === */
    .image-zoom-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
      cursor: zoom-out;
    }

    .image-zoom-overlay img {
      max-width: 95vw;
      max-height: 95vh;
      object-fit: contain;
      display: block;
    }

    @media (max-width: 900px) {
      .hero-inner { grid-template-columns: 1fr; }
      .catalog-layout { grid-template-columns: 1fr; }
      .cart-panel { position: static; max-width: none; }
      .sidebar {
        max-width: 480px;
        width: 100%;
        margin: 0 auto;
      }
      .product-detail {
        grid-template-columns: 1fr;
      }
      .detail-image {
        min-height: 200px;
      }
      .detail-arrow-left {
        left: 4px;
      }
      .detail-arrow-right {
        right: 4px;
      }
    }
  </style>
</head>

<body>

  <!-- TOP BAR -->
  <div class="top-bar">
    <span>☎ 011-4759-1224</span>
    <span>WhatsApp 11 3728-6846</span>
    <span>Industria argentina • Venta mayorista y minorista</span>
  </div>

  <!-- HEADER -->
  <header>
    <div class="nav-inner">
      <a href="index.html" class="logo">
        <div class="logo-img"></div>
        <div class="logo-text">
          <strong>SEGUDAB</strong>
          <span>Equipamiento táctico y policial</span>
        </div>
      </a>

      <nav>
        <a href="index.html" class="nav-link">Inicio</a>

        <div class="nav-item">
          <a href="productos.html" class="nav-link">
            Productos <span class="caret">▼</span>
          </a>
          <div class="dropdown">
            <a href="productos.html?cat=botas">Calzado</a>
            <a href="productos.html?cat=correajes">Correajes</a>
            <a href="productos.html?cat=accesorios">Accesorios</a>
            <a href="productos.html?cat=indumentaria">Indumentaria</a>
          </div>
        </div>

        <a href="porque-elegirnos.html" class="nav-link">¿Por qué elegirnos?</a>
        <a href="contacto.html" class="nav-link nav-cta">Consultar ahora</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <div>
        <h1 class="hero-title">Catálogo de productos</h1>
        <p class="hero-subtitle">Botas, zapatos, correajes, accesorios e indumentaria</p>

        <p class="hero-text">
          Seleccioná los productos que necesitás y armá tu pedido. Luego podés enviarnos la consulta con el detalle
          para coordinar stock, formas de pago y retiro o envío.
        </p>

        <div class="hero-buttons">
          <a
            href="https://wa.me/5491137286846?text=Hola%20Segudab,%20quisiera%20consultar%20por%20compras%20mayoristas"
            class="btn btn-primary"
            target="_blank"
            rel="noopener"
          >
            Consulta mayorista
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- AVISO -->
  <div class="notice-bar">Insignias policiales se venden únicamente a personal de fuerzas con identificación.</div>

  <!-- SECCIÓN CATÁLOGO -->
  <section class="section">
    <div class="section-inner">
      <h2 class="section-title">Catálogo completo</h2>
      <p class="section-subtitle">
        Catálogo orientativo. Los precios pueden variar según talle, modelo y cantidad. Consultá para presupuesto final.
      </p>
      <p class="section-subtitle" id="product-count-text"></p>
    </div>

    <div class="catalog-layout">
      <!-- PRODUCTOS -->
      <div class="product-grid">

        <!-- 1. CAMISA MANGA LARGA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="58000"
             data-size-options="34,36,38,40,42,44,46,48,50,52,54,56,58,60"
             data-article="ART-CAM-ML">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/camisa-manga-larga.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Camisa manga larga</div>
            <div class="product-desc">
              Camisa manga larga azul en ripstop, negra en batista.
              Talles: 34 al 60.
            </div>
            <div class="product-footer">
              <span class="product-price">$58.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 2. CHALECO REFLECTIVO TIPO PONCHO -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="28000"
             data-size-options="XS,S,M,L"
             data-article="ART-CH-REF">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/chaleco-reflectivo.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Chaleco reflectivo tipo poncho</div>
            <div class="product-desc">
              Chaleco reflectivo tipo poncho.
              Talles: XS al L.
            </div>
            <div class="product-footer">
              <span class="product-price">$28.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 3. CHAQUETILLA AMERICANA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="65000"
             data-size-options="2XS,XS,S,M,L,XL,2XL"
             data-article="ART-CHAQ-AM">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/chaquetilla-americana.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Chaquetilla americana</div>
            <div class="product-desc">
              Colores: azul y negro.
              Talles: 2XS al 2XL.
            </div>
            <div class="product-footer">
              <span class="product-price">$65.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 4. CHOMBA PIQUÉ BORDADA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="24000"
             data-size-options="XS,S,M,L,XL,2XL,3XL,4XL,5XL,6XL"
             data-article="ART-CHOM-PIQ">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/chomba-pique-bordada.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Chomba piqué bordada</div>
            <div class="product-desc">
              Chomba piqué bordada azul marino.
              Talles: XS al 6XL.
            </div>
            <div class="product-footer">
              <span class="product-price">$24.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 5. CINTOS -->
        <div class="product-card"
             data-category="correajes"
             data-price="22000"
             data-size-options="Único"
             data-article="ART-CIN-TAC"
             data-stock="Stock a confirmar según modelo.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/correajes/cintos.png');"></div>

          <div class="product-body">
            <div class="product-tag">Correajes</div>
            <div class="product-name">Cintos tácticos</div>
            <div class="product-desc">
              Cinto nato y americano. Cintos internos: todo abrojo y regulable.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$22.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 6. GARIBALDINA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="78000"
             data-size-options="2XS,XS,S,M,L,XL,2XL,3XL,4XL,5XL"
             data-article="ART-GARIB">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/garibaldina.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Garibaldina</div>
            <div class="product-desc">
              Garibaldina con abrigo desmontable. Colores: azul y negro.
              Talles: 2XS al 5XL.
            </div>
            <div class="product-footer">
              <span class="product-price">$78.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 7. KEPIS BORDADOS Y LISOS -->
        <div class="product-card"
             data-category="accesorios"
             data-price="18000"
             data-size-options="Bordado,Liso"
             data-article="ART-KEPI"
             data-stock="Stock a confirmar según modelo y cantidad.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/accesorios/kepi-bordados-y-lisos.png');"></div>

          <div class="product-body">
            <div class="product-tag">Accesorios</div>
            <div class="product-name">Kepis bordados y lisos</div>
            <div class="product-desc">
              Colores: azul y negro. Talle regulable.<br>  
            </div>

            <div class="product-footer">
              <span class="product-price">$18.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 8. MOCHILA TÁCTICA 45 LITROS -->
        <div class="product-card"
             data-category="accesorios"
             data-price="69000"
             data-article="ART-MOCH-45"
             data-stock="Stock a confirmar según cantidad.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/accesorios/mochila-tactica-45-litros.png');"></div>

          <div class="product-body">
            <div class="product-tag">Accesorios</div>
            <div class="product-name">Mochila táctica 45 litros</div>
            <div class="product-desc">
              Mochila táctica de 45 litros, con múltiples bolsillos y sistema MOLLE.
              Ideal para uso intensivo y servicios.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$69.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 9. MUSLERA PISTOLERA DE POLÍMERO -->
        <div class="product-card"
             data-category="correajes"
             data-price="36000"
             data-size-options="Único"
             data-article="ART-MUS-POL"
             data-stock="Stock a confirmar según cantidad.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/correajes/muslera-pistolera-polimero.png');"></div>

          <div class="product-body">
            <div class="product-tag">Correajes</div>
            <div class="product-name">Muslera pistolera de polímero</div>
            <div class="product-desc">
              Muslera pistolera de polímero, ajustable y apta para servicio.
              Compatible con cinturón táctico.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$36.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 10. CHALECO MOLLE -->
        <div class="product-card"
             data-category="correajes"
             data-price="82000"
             data-size-options="Único"
             data-article="ART-CHA-MOL"
             data-stock="Stock a confirmar.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/chaleco-molle.png');"></div>

          <div class="product-body">
            <div class="product-tag">Correajes</div>
            <div class="product-name">Chaleco MOLLE</div>
            <div class="product-desc">
              Cordura importada de 600x600 con doble velcro de cierre con elástico para mayor elasticidad.
              Velcro frente y espalda con forro antitranspirante doble frontura.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$82.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 11. PANTALÓN RIPSTOP -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="35000"
             data-size-options="34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68"
             data-article="ART-PANT-RIP">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/pantalon-ripstop.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Pantalón ripstop</div>
            <div class="product-desc">
              Pantalón ripston, tela antidesgarro. Colores: azul y negro.
              Talles: 34 al 68.
            </div>
            <div class="product-footer">
              <span class="product-price">$35.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 12. PORTACREDENCIAL -->
        <div class="product-card"
             data-category="accesorios"
             data-price="19000"
             data-article="ART-PORT-CRED"
             data-stock="Stock a confirmar.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/accesorios/portacredenciales.png');"></div>

          <div class="product-body">
            <div class="product-tag">Accesorios</div>
            <div class="product-name">Portacredencial</div>
            <div class="product-desc">
              Portacredencial colgante cuero. Portacredencial tipo libro cuero.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$19.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 13. PORTA OBJETOS PARA CINTURÓN -->
        <div class="product-card"
             data-category="correajes"
             data-price="21000"
             data-size-options="Único"
             data-article="ART-PORT-OBJ"
             data-stock="Stock a confirmar según modelo y cantidad.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/correajes/portaobjetos-cinturon.png');"></div>

          <div class="product-body">
            <div class="product-tag">Correajes</div>
            <div class="product-name">Porta objetos para cinturón</div>
            <div class="product-desc">
              Porta objetos para cinturón táctico (porta elementos varios).<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$21.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 14. REMERA M/CORTA C/ESTAMPA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="23000"
             data-size-options="XS,S,M,L,XL,2XL,3XL,4XL,5XL,6XL"
             data-article="ART-REM-MC">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/remera-estampada.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Remera m/corta con estampa</div>
            <div class="product-desc">
              Remera manga corta con estampa algodón peinado.
              Colores: azul y negro. Talles: XS al 6XL.
            </div>
            <div class="product-footer">
              <span class="product-price">$23.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 15. TABLILLA PORTAPAPELES -->
        <div class="product-card"
             data-category="accesorios"
             data-price="12000"
             data-article="ART-TABL-PP"
             data-stock="Stock a confirmar según cantidad.">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/accesorios/tablilla-portapapeles.png');"></div>

          <div class="product-body">
            <div class="product-tag">Accesorios</div>
            <div class="product-name">Tablilla portapapeles</div>
            <div class="product-desc">
              Tablilla portapapeles rígida para uso en servicio.<br>
            </div>

            <div class="product-footer">
              <span class="product-price">$12.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

        <!-- 16. TRICOTA -->
        <div class="product-card"
             data-category="indumentaria"
             data-price="39000"
             data-size-options="XS,S,M,L,XL,2XL,3XL,4XL,5XL,6XL"
             data-article="ART-TRIC">
          <div class="product-image product-image-contain"
               style="background-image:url('productos/Indumentaria/tricota.png');"></div>
          <div class="product-body">
            <div class="product-tag">Indumentaria</div>
            <div class="product-name">Tricota</div>
            <div class="product-desc">
              Tricota, 1/2 cierre forrada.
              Talles: XS al 6XL.
            </div>
            <div class="product-footer">
              <span class="product-price">$39.000</span>
              <button class="btn-small" type="button">Ver detalle</button>
            </div>
          </div>
        </div>

      </div>

      <!-- SIDEBAR: FILTROS + CARRITO -->
      <div class="sidebar">
        <!-- FILTROS -->
        <div class="filters">
          <h3>Filtrar productos</h3>

          <!-- Filtro por categoría -->
          <div class="filter-buttons">
            <button class="filter-btn active" data-category="all">Todos</button>
            <button class="filter-btn" data-category="botas">Calzado</button>
            <button class="filter-btn" data-category="correajes">Correajes</button>
            <button class="filter-btn" data-category="accesorios">Accesorios</button>
            <button class="filter-btn" data-category="indumentaria">Indumentaria</button>
          </div>

          <!-- Buscador -->
          <div class="filters-row">
            <label for="filter-search">Buscar producto:</label>
            <input type="text" id="filter-search" placeholder="Buscar por nombre o descripción" />
          </div>

          <!-- Filtro por precio -->
          <div class="filters-row">
            <label for="filter-price">Filtrar por precio:</label>
            <select id="filter-price">
              <option value="all">Todos los precios</option>
              <option value="low">Menos de $20.000</option>
              <option value="mid">Entre $20.000 y $40.000</option>
              <option value="high">Más de $40.000</option>
            </select>

            <button id="clear-filters" type="button" class="filter-btn">
              Limpiar filtros
            </button>
          </div>
        </div>

        <!-- CARRITO -->
        <aside class="cart-panel">
          <div class="cart-title">Carrito de compras (<span id="cart-count">0</span>)</div>

          <div id="cart-items" class="cart-items">
            <div class="cart-empty">Todavía no agregaste productos.</div>
          </div>

          <div class="cart-total">
            <span>Total estimado:</span>
            <span id="cart-total">$0</span>
          </div>

          <div class="cart-note">
            Este carrito es orientativo. Para confirmar precios, stock y medio de pago,
            completá tus datos y envianos el pedido.
          </div>

          <div class="payment-methods">
            <strong>Medios de pago:</strong>
            <ul>
              <li>Efectivo en el local</li>
              <li>Transferencia bancaria</li>
              <li>Tarjeta de crédito/débito y billeteras virtuales vía Mercado Pago</li>
            </ul>
          </div>

          <div class="checkout-inputs">
            <input id="checkout-nombre" type="text" placeholder="Nombre y apellido" />
            <input id="checkout-telefono" type="text" placeholder="Teléfono" />
            <input id="checkout-email" type="email" placeholder="Correo (opcional)" />
          </div>

          <button class="btn-cart" type="button" onclick="finalizarCompraWhatsApp()">
            Enviar pedido por WhatsApp
          </button>

          <button class="btn-cart btn-mp" type="button" onclick="pagarConMercadoPago()">
            Pagar con Mercado Pago
          </button>
        </aside>
      </div>
    </div>
  </section>

  <!-- DETALLE DE PRODUCTO (OVERLAY) -->
  <div class="product-detail-overlay" id="product-detail-overlay">
    <div class="product-detail">
      <button class="detail-close" type="button" id="detail-close-btn">×</button>

      <!-- Flechas navegación -->
      <button class="detail-arrow detail-arrow-left" type="button" id="detail-prev-btn">‹</button>
      <button class="detail-arrow detail-arrow-right" type="button" id="detail-next-btn">›</button>

      <div class="detail-image" id="detail-image"></div>
      <div class="detail-info">
        <div class="detail-tag" id="detail-tag"></div>
        <h3 class="detail-name" id="detail-name"></h3>
        <p class="detail-article" id="detail-article"></p>
        <p class="detail-desc" id="detail-desc"></p>
        <p class="detail-stock" id="detail-stock">Stock a confirmar según talle y cantidad.</p>

        <div class="detail-price-row">
          <span class="detail-price" id="detail-price"></span>
        </div>

        <div class="detail-form">
          <label>
            Talle
            <select id="detail-size"></select>
          </label>
          <label>
            Cantidad
            <input type="number" id="detail-qty" min="1" value="1" />
          </label>
        </div>

        <div class="detail-actions">
          <button class="detail-add-btn" type="button" id="detail-add-btn">
            Agregar al carrito
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- OVERLAY PARA ZOOM DE IMAGEN -->
  <div class="image-zoom-overlay" id="image-zoom-overlay">
    <img id="zoom-image" alt="Vista ampliada del producto" />
  </div>

  <!-- FOOTER -->
  <footer>
    © 2025 Segudab — Todos los derechos reservados.
  </footer>

  <!-- SCRIPT CARRITO + WHATSAPP + FILTROS + DETALLE + ZOOM + MERCADO PAGO -->
  <script>
    const CART_KEY = 'segudab_cart';
    let cart = [];
    let currentProduct = null; // para el detalle

    // ⬇️ REEMPLAZÁ ESTE LINK POR TU LINK DE MERCADO PAGO
    const MP_LINK = 'https://mpago.la/tu_link_de_pago';

    // para navegación entre productos
    let visibleProductCards = [];
    let currentProductIndex = -1;
    let searchTerm = '';

    function loadCart() {
      const stored = localStorage.getItem(CART_KEY);
      if (!stored) return;
      try {
        const parsed = JSON.parse(stored);
        if (Array.isArray(parsed)) cart = parsed;
      } catch (e) {
        console.error('Error leyendo carrito de localStorage', e);
      }
    }

    function saveCart() {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function formatPrice(value) {
      return value.toLocaleString('es-AR');
    }

    function renderCart() {
      const cartItemsContainer = document.getElementById('cart-items');
      const cartCount = document.getElementById('cart-count');
      const cartTotal = document.getElementById('cart-total');

      cartItemsContainer.innerHTML = '';

      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<div class="cart-empty">Todavía no agregaste productos.</div>';
        cartCount.textContent = '0';
        cartTotal.textContent = '$0';
        return;
      }

      let total = 0;
      let count = 0;

      cart.forEach(item => {
        total += item.price * item.qty;
        count += item.qty;

        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="cart-item-main">
            <span class="cart-item-name">${item.name}</span>
            <span class="cart-item-subtotal">$${formatPrice(item.price * item.qty)}</span>
          </div>
          <div class="cart-item-meta">
            Talle: ${item.size || 'A coordinar'}
          </div>
          <div class="cart-item-actions">
            <button class="qty-btn" data-action="decrease" data-name="${item.name}" data-size="${item.size}">−</button>
            <span class="cart-item-qty">${item.qty}</span>
            <button class="qty-btn" data-action="increase" data-name="${item.name}" data-size="${item.size}">+</button>
            <button class="remove-btn" data-action="remove" data-name="${item.name}" data-size="${item.size}">✕</button>
          </div>
        `;
        cartItemsContainer.appendChild(div);
      });

      cartCount.textContent = count;
      cartTotal.textContent = '$' + formatPrice(total);
    }

    function addToCart(name, price, size = 'A coordinar', qty = 1) {
      const existing = cart.find(p => p.name === name && p.size === size);
      if (existing) {
        existing.qty += qty;
      } else {
        cart.push({ name, price: Number(price), qty: qty, size });
      }
      saveCart();
      renderCart();
    }

    function updateItemQty(name, size, delta) {
      const item = cart.find(p => p.name === name && p.size === size);
      if (!item) return;
      item.qty += delta;
      if (item.qty < 1) item.qty = 1;
      saveCart();
      renderCart();
    }

    function removeFromCart(name, size) {
      const index = cart.findIndex(p => p.name === name && p.size === size);
      if (index !== -1) {
        cart.splice(index, 1);
        saveCart();
        renderCart();
      }
    }

    // ---------- DETALLE DE PRODUCTO ----------
    const sizeOptionsByCategory = {
      botas: ['38', '39', '40', '41', '42', '43', '44', '45'],
      correajes: ['S', 'M', 'L', 'XL'],
      accesorios: ['Único'],
      indumentaria: ['S', 'M', 'L', 'XL', 'XXL']
    };

    function openProductDetail(card) {
      const overlay = document.getElementById('product-detail-overlay');
      const nameEl = card.querySelector('.product-name');
      const descEl = card.querySelector('.product-desc');
      const tagEl  = card.querySelector('.product-tag');
      const imgEl  = card.querySelector('.product-image');

      const name = nameEl ? nameEl.textContent.trim() : '';
      const desc = descEl ? descEl.textContent.trim() : '';
      const tag  = tagEl ? tagEl.textContent.trim() : '';
      const cat  = card.dataset.category || '';
      const price = Number(card.dataset.price || 0);
      const article = card.dataset.article || '';
      const stockTextFromCard = card.dataset.stock;  // texto de stock específico

      // Imagen
      let bg = imgEl ? imgEl.style.backgroundImage : '';
      let imageUrl = '';
      if (bg && bg.startsWith('url')) {
        imageUrl = bg.slice(4, -1).replace(/["']/g, '');
      }

      currentProduct = { name, price, category: cat, imageUrl, tag, desc, article };

      // aseguramos lista de visibles
      if (!visibleProductCards.length) {
        buildVisibleProductCards();
      }
      currentProductIndex = visibleProductCards.indexOf(card);
      if (currentProductIndex === -1) {
        buildVisibleProductCards();
        currentProductIndex = visibleProductCards.indexOf(card);
      }

      const detailImage   = document.getElementById('detail-image');
      const detailTag     = document.getElementById('detail-tag');
      const detailName    = document.getElementById('detail-name');
      const detailDesc    = document.getElementById('detail-desc');
      const detailPrice   = document.getElementById('detail-price');
      const detailSize    = document.getElementById('detail-size');
      const detailQty     = document.getElementById('detail-qty');
      const detailArticle = document.getElementById('detail-article');
      const detailStock   = document.getElementById('detail-stock');

      detailImage.style.backgroundImage = imageUrl ? `url('${imageUrl}')` : 'none';

      // si la card usa contain, aplico la clase en el detalle
      if (imgEl && imgEl.classList.contains('product-image-contain')) {
        detailImage.classList.add('detail-image-contain');
      } else {
        detailImage.classList.remove('detail-image-contain');
      }

      detailTag.textContent = tag;
      detailName.textContent = name;
      detailDesc.textContent = desc;
      detailPrice.textContent = '$' + formatPrice(price);

      // texto de stock según corresponda
      if (detailStock) {
        if (stockTextFromCard) {
          detailStock.textContent = stockTextFromCard;
        } else {
          detailStock.textContent = 'Stock a confirmar según talle y cantidad.';
        }
      }

      if (detailArticle) {
        if (article) {
          detailArticle.textContent = 'Artículo: ' + article;
          detailArticle.style.display = 'block';
        } else {
          detailArticle.style.display = 'none';
        }
      }

      // Rellenar talles
      detailSize.innerHTML = '';

      const customSizes = card.dataset.sizeOptions; // ej: "35,36,37..."
      let options;

      if (customSizes) {
        options = customSizes.split(',').map(s => s.trim()).filter(Boolean);
      } else {
        options = sizeOptionsByCategory[cat] || ['A coordinar'];
      }

      options.forEach(talle => {
        const opt = document.createElement('option');
        opt.value = talle;
        opt.textContent = talle;
        detailSize.appendChild(opt);
      });

      detailQty.value = 1;

      overlay.style.display = 'flex';
    }

    function closeProductDetail() {
      const overlay = document.getElementById('product-detail-overlay');
      overlay.style.display = 'none';
      currentProduct = null;
      currentProductIndex = -1;
    }

    function buildVisibleProductCards() {
      visibleProductCards = Array.from(document.querySelectorAll('.product-card'))
        .filter(card => card.style.display !== 'none');
    }

    function showNextProduct() {
      if (!visibleProductCards.length) buildVisibleProductCards();
      if (!visibleProductCards.length) return;
      if (currentProductIndex < 0) currentProductIndex = 0;
      let newIndex = currentProductIndex + 1;
      if (newIndex >= visibleProductCards.length) newIndex = 0;
      openProductDetail(visibleProductCards[newIndex]);
    }

    function showPrevProduct() {
      if (!visibleProductCards.length) buildVisibleProductCards();
      if (!visibleProductCards.length) return;
      if (currentProductIndex < 0) currentProductIndex = 0;
      let newIndex = currentProductIndex - 1;
      if (newIndex < 0) newIndex = visibleProductCards.length - 1;
      openProductDetail(visibleProductCards[newIndex]);
    }

    // Botones dentro del carrito
    document.getElementById('cart-items').addEventListener('click', (e) => {
      const btn = e.target.closest('button');
      if (!btn) return;

      const action = btn.dataset.action;
      const name = btn.dataset.name;
      const size = btn.dataset.size;
      if (!action || !name) return;

      if (action === 'increase') {
        updateItemQty(name, size, 1);
      } else if (action === 'decrease') {
        updateItemQty(name, size, -1);
      } else if (action === 'remove') {
        removeFromCart(name, size);
      }
    });

    function finalizarCompraWhatsApp() {
      if (cart.length === 0) {
        alert('Primero agregá productos al carrito.');
        return;
      }

      const nombre = document.getElementById('checkout-nombre').value.trim();
      const telefono = document.getElementById('checkout-telefono').value.trim();
      const email = document.getElementById('checkout-email').value.trim();

      if (!nombre || !telefono) {
        alert('Por favor completá nombre y teléfono para enviar el pedido.');
        return;
      }

      let texto = 'Hola Segudab, quiero hacer un pedido desde la web:%0A%0A';
      texto += 'Nombre: ' + nombre + '%0A';
      texto += 'Teléfono: ' + telefono + '%0A';
      if (email) texto += 'Email: ' + email + '%0A';
      texto += '%0AProductos:%0A';

      let total = 0;
      cart.forEach(item => {
        total += item.price * item.qty;
        texto += '- ' + item.qty + ' x ' + item.name + ' (Talle: ' + (item.size || 'A coordinar') + ')%0A';
      });

      texto += '%0ATotal estimado: $' + formatPrice(total) + '%0A';
      texto += '%0A¿Me podrían confirmar stock, precio final y formas de pago?';

      const numero = '5491137286846';
      const url = 'https://wa.me/' + numero + '?text=' + texto;

      window.open(url, '_blank');
    }

    // Botón "Pagar con Mercado Pago" (link genérico)
    function pagarConMercadoPago() {
      if (cart.length === 0) {
        alert('Primero agregá productos al carrito.');
        return;
      }

      let total = 0;
      cart.forEach(item => {
        total += item.price * item.qty;
      });

      const msg =
        'El total estimado de tu carrito es $' + formatPrice(total) +
        '.\n\nEste botón te llevará a un link de pago de Mercado Pago configurado por Segudab. ' +
        'Si el monto no coincide exactamente, se ajustará manualmente con el comercio.\n\n¿Querés continuar?';

      if (confirm(msg)) {
        window.open(MP_LINK, '_blank');
      }
    }

    /* FILTROS */
    let currentCategory = 'all';
    const filterButtons = document.querySelectorAll('.filter-btn');
    const filterPrice = document.getElementById('filter-price');
    const clearFiltersBtn = document.getElementById('clear-filters');

    // contador de productos visibles
    function updateProductCount() {
      const label = document.getElementById('product-count-text');
      const visible = visibleProductCards.length;
      if (label) {
        label.textContent = visible === 1
          ? 'Mostrando 1 producto'
          : `Mostrando ${visible} productos`;
      }
    }

    // Detectar categoría desde la URL
    function loadCategoryFromURL() {
      const params = new URLSearchParams(window.location.search);
      const cat = params.get('cat');

      if (!cat) return;

      const btn = document.querySelector(`.filter-btn[data-category="${cat}"]`);
      if (btn) {
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = cat;
      }
    }

    function applyFilters() {
      const priceFilter = filterPrice.value;

      const cards = document.querySelectorAll('.product-card');
      visibleProductCards = [];

      cards.forEach(card => {
        const cardCat = card.dataset.category;
        const priceValue = Number(card.dataset.price);

        let show = true;

        // por categoría
        if (currentCategory !== 'all' && cardCat !== currentCategory) {
          show = false;
        }

        // por precio
        if (priceFilter !== 'all') {
          if (priceFilter === 'low' && priceValue >= 20000) show = false;
          if (priceFilter === 'mid' && (priceValue < 20000 || priceValue > 40000)) show = false;
          if (priceFilter === 'high' && priceValue <= 40000) show = false;
        }

        // por texto (buscador)
        if (searchTerm) {
          const nameEl = card.querySelector('.product-name');
          const descEl = card.querySelector('.product-desc');
          const text = ((nameEl ? nameEl.textContent : '') + ' ' + (descEl ? descEl.textContent : '')).toLowerCase();
          if (!text.includes(searchTerm)) {
            show = false;
          }
        }

        card.style.display = show ? 'block' : 'none';
        if (show) visibleProductCards.push(card);
      });

      updateProductCount();
    }

    filterButtons.forEach(btn => {
      const cat = btn.dataset.category;
      if (!cat) return;

      btn.addEventListener('click', () => {
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.dataset.category;
        applyFilters();
      });
    });

    filterPrice.addEventListener('change', applyFilters);

    // Botón "Limpiar filtros"
    if (clearFiltersBtn) {
      clearFiltersBtn.addEventListener('click', () => {
        currentCategory = 'all';
        const allBtn = document.querySelector('.filter-btn[data-category="all"]');
        if (allBtn) {
          filterButtons.forEach(b => b.classList.remove('active'));
          allBtn.classList.add('active');
        }
        filterPrice.value = 'all';
        const filterSearch = document.getElementById('filter-search');
        searchTerm = '';
        if (filterSearch) filterSearch.value = '';
        applyFilters();
      });
    }

    // Configurar eventos de detalle + zoom
    function setupProductDetailEvents() {
      const cards = document.querySelectorAll('.product-card');

      cards.forEach(card => {
        // click en toda la tarjeta
        card.addEventListener('click', () => {
          openProductDetail(card);
        });

        // que el botón no dispare doble
        const btn = card.querySelector('.btn-small');
        if (btn) {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            openProductDetail(card);
          });
        }
      });

      const overlay = document.getElementById('product-detail-overlay');
      const closeBtn = document.getElementById('detail-close-btn');
      const addBtn = document.getElementById('detail-add-btn');
      const prevBtn = document.getElementById('detail-prev-btn');
      const nextBtn = document.getElementById('detail-next-btn');

      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          closeProductDetail();
        });
      }

      if (prevBtn) {
        prevBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          showPrevProduct();
        });
      }

      if (nextBtn) {
        nextBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          showNextProduct();
        });
      }

      // cerrar al clickear fuera del recuadro
      if (overlay) {
        overlay.addEventListener('click', (e) => {
          if (e.target === overlay) {
            closeProductDetail();
          }
        });
      }

      // ZOOM: click en la imagen del detalle
      const detailImage = document.getElementById('detail-image');
      const zoomOverlay = document.getElementById('image-zoom-overlay');
      const zoomImage = document.getElementById('zoom-image');

      if (detailImage && zoomOverlay && zoomImage) {
        detailImage.addEventListener('click', () => {
          if (!currentProduct || !currentProduct.imageUrl) return;
          zoomImage.src = currentProduct.imageUrl;
          zoomOverlay.style.display = 'flex';
        });

        // cerrar zoom al clickear
        zoomOverlay.addEventListener('click', () => {
          zoomOverlay.style.display = 'none';
        });
      }

      // ESC y flechas para cerrar / navegar
      document.addEventListener('keydown', (e) => {
        const overlayEl = document.getElementById('product-detail-overlay');
        const isDetailOpen = overlayEl && overlayEl.style.display === 'flex';

        if (e.key === 'Escape') {
          closeProductDetail();
          const zoomOverlayEl = document.getElementById('image-zoom-overlay');
          if (zoomOverlayEl) {
            zoomOverlayEl.style.display = 'none';
          }
        }

        if (isDetailOpen && e.key === 'ArrowRight') {
          e.preventDefault();
          showNextProduct();
        }

        if (isDetailOpen && e.key === 'ArrowLeft') {
          e.preventDefault();
          showPrevProduct();
        }
      });

      // Agregar al carrito desde el detalle
      if (addBtn) {
        addBtn.addEventListener('click', () => {
          if (!currentProduct) return;
          const detailSize = document.getElementById('detail-size');
          const detailQty  = document.getElementById('detail-qty');

          const size = detailSize ? (detailSize.value || 'A coordinar') : 'A coordinar';
          const qty = detailQty ? Math.max(1, parseInt(detailQty.value || '1', 10)) : 1;

          addToCart(currentProduct.name, currentProduct.price, size, qty);
          closeProductDetail();
        });
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadCart();
      renderCart();
      loadCategoryFromURL();

      const filterSearch = document.getElementById('filter-search');
      if (filterSearch) {
        filterSearch.addEventListener('input', () => {
          searchTerm = filterSearch.value.toLowerCase().trim();
          applyFilters();
        });
      }

      applyFilters();       // también arma visibleProductCards y actualiza el contador
      setupProductDetailEvents();
    });
  </script>

</body>
</html>
